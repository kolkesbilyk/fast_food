<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

<h:head>
    <title>Menu</title>
  <style type="">
    .product-item .product-item-content {
      border: 1px solid var(--surface-d);
      border-radius: 3px;
      margin: .3rem;
      text-align: center;
      padding: 2rem 0;
    }

    .product-item .product-image {
      width: 50%;
      box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23)
    }
  </style>
</h:head>
<h:body styleClass="login-body" >

  <div class="product card">
    <h:form id="menuForm">
      <p:dataScroller value="#{menuBean.dishes}" var="dish" chunkSize="10" mode="inline">
        <f:facet name="header">
          Scroll Down to Load More Products
        </f:facet>

        <div class="product">
          <div class="product-list-item p-5">
            <p:graphicImage name="#{dish.image}"/>
            <div class="product-list-detail">
              <div class="product-name">#{dish.name}</div>
              <i class="pi pi-tag product-category-icon"/><span
                class="product-category">#{dish.description}</span>
            </div>
            <div class="product-list-action" style="text-align:right">
              <h:outputText value="#{dish.prize}" styleClass="product-price">
                <f:convertNumber currencySymbol="$" type="currency"/>
              </h:outputText>
              <p:commandButton value="Add To Buy Bucket" icon="pi pi-shopping-cart" update="@form" actionListener="#{menuBean.addDishToProductBucket(dish.id)}">
              </p:commandButton>
              <hr/>
            </div>
          </div>
        </div>
      </p:dataScroller>
      <c:if test="#{menuBean.selectDishes.size() > 0}">
      <div class="card">
        <p:commandButton id="pay" value="Pay order" style="background-color: green" update="@form" icon="pi pi-check" actionListener="#{menuBean.payOrder()}"/>
        <p:carousel value="#{menuBean.selectDishes}" var="dish" numVisible="3" numScroll="1">

          <f:facet name="header">
            <h5>Your order total sum #{menuBean.totalSum} $</h5>
          </f:facet>
          <div class="product-item">
            <div class="product-item-content">
              <div class="mb-3">
                <p:graphicImage name="images/menu.png" styleClass="product-image"/>
              </div>
              <div>
                <h4 class="mb-1">#{dish.name}</h4>
                <h6 class="mt-0 mb3">
                  <h:outputText value="#{dish.prize}">
                    <f:convertNumber type="currency" pattern="#0" currencySymbol="$"/>
                  </h:outputText>
                </h6>
                <p:commandButton id="remove" value="Remove this dish" update="@form" icon="pi pi-times" style="background-color: #e82424"
                    actionListener="#{menuBean.removeDishFromOrder(dish.id)}"/>
              </div>
            </div>
          </div>
        </p:carousel>
      </div>
      </c:if>
    </h:form>
  </div>
<!--<h:outputStylesheet name="css/style.css"/>-->
</h:body>
</html>
